---
description: "要件に基づいて技術設計を作成します"
---

## 1. 前提条件の確認

- 現在のスペックを `.claude/current-spec.txt` から確認
- `.claude/spec/{feature-name}/requirements.md` の存在を確認

要件定義がない場合：
```
❌ エラー: 要件定義がありません
先に /kiroppoi-requirements で要件を定義してください
```

## 2. 要件の分析

requirements.md を読み込み、技術的な実装方針を検討してください。
プロジェクトの既存コードやパッケージ依存関係も考慮。

## 3. 設計書の作成

以下の形式で `.claude/spec/{feature-name}/design.md` を作成：

```markdown
# 技術設計: {feature-name}

更新日: {今日の日付}

## アーキテクチャ
### 構成図
```
{アスキーアートで簡潔に}
[Client] --> [API] --> [Database]
```

### コンポーネント
- {コンポーネント1}: {責務}
- {コンポーネント2}: {責務}

## ファイル構造
```
src/
├── {ディレクトリ}/
│   ├── {ファイル1}      # {説明}
│   └── {ファイル2}      # {説明}
└── {ディレクトリ}/
    └── {ファイル3}      # {説明}
```

## API仕様
### {メソッド} {エンドポイント}
Request:
```json
{
  "field": "type"
}
```
Response:
```json
{
  "field": "type"
}
```

## データモデル
```{言語}
interface/class {モデル名} {
  field: type;
}
```

## 技術スタック
- Framework: {選定理由}
- Database: {選定理由}
- {その他}: {選定理由}

## セキュリティ
- {考慮事項1}
- {考慮事項2}
```

## 4. タスクリストの生成

design.md の内容から `.claude/spec/{feature-name}/tasks.md` を自動生成：

```markdown
# タスクリスト: {feature-name}

更新日: {今日の日付}

## タスク
- [ ] {タスク1}
  - {詳細説明}
  - 依存関係: {依存タスク or なし}

- [ ] {タスク2}
  - {詳細説明}
  - 依存関係: {依存タスク}

## 完了したタスク
（実装が進むにつれて上から移動）

## メモ
（実装時の決定事項や注意点を記録）
```

設計内容から適切な粒度でタスクを抽出。
各タスクは1-2時間で完了できる程度に分割。

## 5. 完了確認

```
✅ 技術設計を完了しました
📄 design.md - 設計書
📋 tasks.md - {タスク数}個のタスクを生成

次: /kiroppoi-implement でタスクを実装
```

$ARGUMENTS
