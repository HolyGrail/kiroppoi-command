---
description: "現在のスペックの実装を検証します"
---

## 1. 検証対象の特定

- 現在のスペックを `.claude/current-spec.txt` から取得
- `.claude/spec/{feature-name}/design.md` からファイル一覧を抽出
- `.claude/spec/{feature-name}/tasks.md` の完了タスクから実装ファイルを特定

スペックが設定されていない場合：
```
❌ エラー: スペックが設定されていません
先に /kiroppoi-spec {feature-name} でスペックを作成してください
```

## 2. 要件との照合

`.claude/spec/{feature-name}/requirements.md` の完了条件をチェック：
- 各完了条件に対して実装状況を確認
- 未実装の機能を特定

## 3. コード品質チェック

実装されたファイルに対して以下を確認：
- 構文エラーの有無
- 未使用変数や未定義関数
- テストの実行と成功
- リンター/フォーマッターのチェック
- 基本的なセキュリティ問題：
  - ハードコードされた認証情報
  - SQLインジェクション脆弱性
  - XSS脆弱性の可能性
  - 適切でないエラーハンドリング

## 4. 検証結果をtasks.mdに追記

`.claude/spec/{feature-name}/tasks.md` のメモセクションに結果を記録：

```markdown
## メモ
### 検証結果 ({日時})
✅ 合格項目:
- {合格項目1}
- {合格項目2}

⚠️ 要改善:
- {改善項目1}: {詳細}
- {改善項目2}: {詳細}

追加タスク:
- [ ] {改善のためのタスク1}
- [ ] {改善のためのタスク2}
```

改善が必要な項目は、タスクセクションにも追加。

## 5. 完了メッセージ

問題がない場合：
```
✅ 検証完了

すべての項目が合格しました！
- 要件定義の完了条件: すべて満たしています
- コード品質: 問題ありません
- セキュリティ: 脆弱性は検出されませんでした

機能の実装が完了しました！
```

問題がある場合：
```
検証完了

✅ 合格: {数}項目
⚠️ 要改善: {数}項目

改善タスクを tasks.md に追加しました
次: /kiroppoi-implement で改善を実施
```

## 検証のベストプラクティス

- プロジェクト固有のlint/typecheck設定があれば考慮
- 実装の規模に応じて検証の深さを調整
- 明らかな問題に焦点を当て、過度に厳密にならない

$ARGUMENTS